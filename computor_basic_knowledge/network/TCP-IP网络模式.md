# TCP-IP相关

### 1.网络模型

```verilog
1-应用层
	各种协议：如http，https，ftp，ssh等协议
2-传输层
	提供端到端的通信，包括错误检测，流量控制，数据分段，如tcp，udp
3-网络层
	处理数据包的路由和转发，以便数据从源转发到目的地，IP地址就是在这一层定义的
4-链路层
	负责在物理链路上可靠的传输数据帧
```



### 2.传输过程

```verilog
发送方：
	-在应用层发送数据消息
	-在传输层，该消息会被加上一个头部（包含源端口目标端口，有了目标端口接受方可以知道发给哪个应用，有了源端口接收方的回复信息应该应该发往那个应用），封装成一个tcp包/udp包（具体哪一个取决于采用的协议）
	-在网络层加上网络层数据后被封装成IP报文（包括了源IP地址和目标IP地址），如果报文过大超过了后续链路层的最大传输单元（也叫mtu）会将这个报文分割成不超过mtu的多个报文。
	-在链路层加上头尾后被封装成真正的能在物理网络传输的数据帧，最后通过物理网络传输给接收方。

接收方：
	-在链路层去掉数据帧中的头尾，传输给接收方网络层，网络层确认IP报文的目标IP就是自己就继续处理，不是则直接抛弃，还识别IP报文是否进行了分片，如果分片了随即将数据及其他信息一起存储起来，收集了所有的分片就组合起来并交给传输层。
	-传输层检查头部的目标端口字段，并将信息发送给应用程序
	-应用层接收消息，做程序后续自己的事情。
```

